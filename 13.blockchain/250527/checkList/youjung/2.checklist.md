# 여러분들과 함께 점검할 토이 프로젝트 진행 체크리스트

## 1. **컨트랙트 구조 어떻게 짰어?**

- 컨트랙트가 몇 개에요?

BadgeNFT.sol: NFT
STKToken.sol: ERC-20
UserCRUD.sol: 게시판

- 각 컨트랙트는 무슨 역할인가요?
- 책임을 나눴다면 어떤 기준으로 나눈거에요?

## 2. **배포 순서 흐름**

1. STKToken.sol
2. BadgeNFT.sol
3. UserCRUD.sol

## 3. **지금까지 어디까지 구현했어?**

- 글 작성 기능 구현했어요? 체크
- 0.5 ETH 체크 로직 있어요? 체크
- 보상(STK) 지급은 되고 있어요? 체크
- 등급 계산 로직 있어요? 실제로 조건 만족하면 등급 올라가요? 체크
- NFT는 발급이 되나요? 누구 기준으로? 어떤 시점에서? 체크

## 4. **다시 정리해서 말해볼까요? ‘내가 글 하나 쓴다’고 했을 때 지금 프로젝트에서 일어나는 일은?**

### 1. 컨트랙트 구조 설명 요청

---

### 2. 기능 흐름을 말로 설명 요청

## 4. 그럼 다음은 뭐 할 계획이에요?

## 5. QNA

## 6. 교강사가 학생분에게 질문

```solidity
    function firstRewardSTK() external {
        require(!firstCompensated[msg.sender], "already paid");
        stkToken.transfer(msg.sender, 1 * 10 ** 18);
        firstCompensated[msg.sender] = true;

        emit FirstCompensated(msg.sender);
    }
```

이거 언제 호출하는지? 왜 이런 구조인지?

학생분 의견: 최초 지갑 연결했을 때 호출할겁니다.  
일반 회원 1STK 보상을 이렇게 해석했다?

네 그것도 그런데, 조건을 보시면

글을 작성할 때, 1STK를 준다고 되어있기도 하고,  
그리고 처음에 접속하면 주어지는 쿠폰 개념으로 이해하고 있었습니다.

요구 사항 이전에, web3 환경 생태계에서 예로 들면, 이런 쿠폰 개념은 아예 없습니다.
프리 민팅, 에어 드롭같은 키워드 형태로 존재합니다.
=> 차이점 => 사용자가 버튼을 클릭하여 얻을 수 있는 구조.

즉, 내가 공짜로 토큰 줄게. 너의 "사인"이 필요해라는 구조가 필요합니다.

그리고 화면으로 구현했을 때, 렌더링 시점 잘 잡아야 함.

=> 이것도 회사에게 질문을 해야할 정도의 고민거리인 것이죠.

기업 협업 할 때, 한 번 더 생각하고 다른 분들과 협의를 통해서 회사와 상의를 해보겠지만,  
이런 구조는 다시 한 번 깊게 생각해주십사 하는 바램입니다.

## stkToken.transfer(msg.sender, 1 ether); 왜?

transferFrom으로 했는데 안넘어갑니다.

이거 문제가 발생합니다.

만약에, 유정님이 allowance 관련한 유효성 검사를 빡세게 잡아놓았으면 모르는데  
그러면 \_transfer 인정

근데 그게 아니라면?  
애초에 transferFrom 내부에 allowance에 대한 유효성 겁사가 구현되어 있음.

교강사인 내가 생각했을 땐, approve를 제대로 안해준 것 같음.
