## 4. Route 53 레코드 등록

앞서 Route 53에 호스팅 영역을 생성하고, 가비아에서 네임서버를 위임해주었다면  
이제부터는 AWS 내에서 자유롭게 도메인과 서버(IP)를 연결할 수 있습니다.  
지금 할 일은 **도메인 이름 → EC2 인스턴스의 탄력 IP 주소**로 연결하는 작업입니다.

---

### 4.1 A 레코드란?

DNS 설정의 기본이 되는 것이 바로 **A 레코드(Address Record)**입니다.  
A 레코드는 "이 도메인은 어떤 IP 주소를 가리키는가?"를 설정하는 역할을 합니다.

예를 들어:

```
mve-api.store → 13.209.xxx.xxx
```

이렇게 등록하면, 사용자가 `https://mve-api.store`로 접속했을 때 해당 IP를 가진 **EC2 인스턴스**로 연결됩니다.

---

### 4.2 메인 도메인 연결 설정

`mve-api.store` 또는 `mve-front.store` 같은 기본 도메인들을 각 EC2 인스턴스의 IP로 연결해보겠습니다.

#### 등록 절차

1. AWS 콘솔 → Route 53 → [호스팅 영역] 이동
2. 연결할 도메인(`mve-api.store` 또는 `mve-front.store`) 클릭
3. [레코드 생성] 클릭

| 항목        | 설정 예시              |
| ----------- | ---------------------- |
| 레코드 이름 | (비워두기) 또는 `@`    |
| 유형        | A – IPv4 주소          |
| 값          | EC2 인스턴스의 탄력 IP |
| TTL         | 기본값 (300초) 사용    |

> 레코드 이름을 비워두면 도메인 자체(`mve-api.store`)에 해당 레코드가 적용됩니다.

---

### 4.3 서브도메인 연결 설정 (`admin`, `api`)

이제 `admin.mve-front.store` 같은 **서브도메인 연결**을 진행합니다.
서브도메인도 A 레코드 방식으로 연결합니다.

#### 도메인 구조 설명

DNS에서 도메인은 **오른쪽에서 왼쪽으로** 읽습니다.

예:

```
admin.mve-front.store
→ mve-front.store의 하위 도메인 admin
```

#### 등록 절차

1. 호스팅 영역에서 `mve-front.store` 클릭
2. [레코드 생성] 클릭

| 항목        | 설정 예시                         |
| ----------- | --------------------------------- |
| 레코드 이름 | `admin`                           |
| 유형        | A – IPv4 주소                     |
| 값          | mve-front 인스턴스의 탄력 IP 주소 |
| TTL         | 기본값 사용 (300초)               |

> 이 설정으로 `admin.mve-front.store`는 mve-front 서버로 연결됩니다.

---

### 4.4 도메인 연결 확인 및 점검

레코드 등록을 마쳤다면, 실제로 도메인이 EC2 IP에 연결되는지 확인해야 합니다.

#### 확인 방법

- **명령어 사용**

```bash
nslookup mve-api.store
nslookup admin.mve-front.store
ping mve-front.store
```

(운영체제에 따라 `dig`, `ping`, `host` 명령어도 사용 가능)

- **브라우저에서 직접 접속**

```
http://mve-api.store
http://mve-front.store
http://admin.mve-front.store
```

#### 점검 시 확인할 사항

- 접속 시 nginx 기본 페이지 또는 배포된 화면이 뜨면 성공
- 다음 문제 시 원인 점검:

| 문제                          | 점검 항목                                |
| ----------------------------- | ---------------------------------------- |
| 연결되지 않음 (`사이트 없음`) | A 레코드 오타 / 잘못된 IP 입력           |
| 연결은 되지만 오류 발생       | EC2 인바운드에서 80번 포트 열렸는지 확인 |
| 연결 지연                     | DNS 전파는 최대 수 시간 걸릴 수 있음     |

---

도메인 연결이 완료되었다면, 다음 단계는 **HTTPS 인증서를 발급받아 보안 연결을 적용하는 작업**입니다.

**→ 다음: 5. 서버에 HTTPS 적용하기**
