## Authorization 헤더란?

`Authorization` 헤더는 **클라이언트(사용자)**가 서버에 자신이 인증된 사용자임을 증명하기 위해 인증 정보를 전달하는 **HTTP 표준 헤더**입니다.  
서버는 이 헤더를 통해 클라이언트의 요청이 인증된 사용자의 요청인지 확인합니다.

**사용 예시:**
```javascript
request.header["authorization"];
```

## 왜 사용하나요?

클라이언트가 서버에 요청을 보낼 때, 서버는 요청이 정말 **"인증된 사용자"**로부터 온 것인지 확인해야 합니다.  
이를 위해 `Authorization` 헤더를 사용하여 인증 정보를 서버에 전달합니다.

> **쉽게 말하면:**  
> "나 회원이고, 이 서비스를 이용할 권한이 있어! 확인해봐!" 라고 서버에 알려주는 역할입니다.

## 로그아웃 시 검증 흐름 (예시)

### **전제 조건**

- 로그아웃 요청 시, 토큰의 유효성과 변조 여부를 확인할 것입니다.
- **참고**: 실질적으로 **로그아웃 자체**는 검증이 반드시 필요하지 않지만, 예제로 검증 과정을 살펴보는 데 의미가 있습니다.

### **로그아웃 요청 흐름**

1. **클라이언트**: 로그아웃 버튼 클릭.
2. **클라이언트**: 요청 헤더(`Authorization`)에 인증 토큰을 포함하여 서버에 요청.
3. **서버**:
   - 헤더의 `Authorization` 값 확인.
   - 토큰의 **유효성**(만료 여부, 변조 여부 등)을 검증.
4. **결과**:
   - 검증 성공: 로그아웃 요청 처리 및 응답 반환. => 쿠키값 삭제(우리 로그아웃 로직)
   - 검증 실패: 에러 반환 (`401 Unauthorized`).

## 주의 사항

1. **검증 방식의 중요성**  

   이 과정은 **"토큰 검증 방식"**을 이해하는 데 초점이 맞춰져 있습니다.  
   실질적으로는 로그아웃 기능을 구현하는 데 토큰 검증이 반드시 필요한 것은 아닙니다.

2. **다양한 인증 방식**  

   `Authorization` 헤더는 JWT만 사용하는 것이 아닙니다.  
   Basic 인증, API Key 인증 등 다양한 방식으로 사용될 수 있습니다.

## Authorization 헤더의 형식

1. **Bearer** (JWT 기반 인증에 주로 사용됨)  
   - 이 방식을 사용하면 토큰을 통해 "이 사용자는 인증된 사용자"임을 서버에 증명합니다.
   - **구조**:
     ```
     Authorization: Bearer <Base64로 인코딩된 Token 값>
     ```
   - **예시**:
     ```javascript
     headers: {
       Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
     }
     ```

2. **JWT만 사용하지 않음**  

   - `Authorization` 헤더는 다양한 인증 방식에 사용될 수 있습니다.
   - 다른 예시:
     - **Basic 인증**:
       ```
       Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
       ```
     - **API Key 인증**:
       ```
       Authorization: ApiKey abc123def456
       ```

## 언제 검증할 지 판단해야 함.

### 게시판

1. 게시판 상세 페이지 수정(글 수정)
2. 게시판 글 삭제
3. 댓글 수정

## `access_token`

사용자 인증 정보를 기반으로, 서버의 특정 리소스에
접근할 수 있는 권한 증명 문자열.

## payload

저는 예제를 위해서, 페이로드 데이터 값을 두 개만 넣었어요

```js
const data = {
   name
   userid
   iat
   sub
}
```

## iat와 sub의 중요함.

- iat(Issued At): JWT가 발급된 시점 => 만료가 되었는지 검증이 가능하다.
- sub(고유식별자): 토큰이 식별하는 대상